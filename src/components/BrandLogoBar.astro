---
import { getCollection } from 'astro:content';

// Get all brands and sort by order
const brands = await getCollection('brands');
const sortedBrands = brands
  .filter(brand => brand.data.featured && brand.data.logoUrl && !brand.data.logoUrl.includes('example.com'))
  .sort((a, b) => (a.data.order || 999) - (b.data.order || 999))
  .slice(0, 8); // Show max 8 brands
---

<section class="py-12 bg-white dark:bg-gray-800 border-y border-gray-200 dark:border-gray-700">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <p class="text-center text-sm font-medium text-gray-600 dark:text-gray-400 mb-8">
      Trusted by CRO professionals at
    </p>
    <div class="grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-8 gap-8 items-center">
      {sortedBrands.map((brand) => (
        <div class="flex items-center justify-center">
          <img 
            src={brand.data.logoUrl} 
            alt={`${brand.data.name} logo`}
            class="h-8 w-auto grayscale opacity-60 hover:grayscale-0 hover:opacity-100 transition-all duration-300"
            loading="lazy"
          />
        </div>
      ))}
    </div>
  </div>
</section>