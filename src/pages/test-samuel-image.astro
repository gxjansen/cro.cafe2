---
// Test page to debug Samuel's image loading
import { getGuestBySlug, getGuestWithLinkedIn, getGuestProfilePicture } from '../utils/content';

const guestSlug = 'samuel-hess';
const guest = await getGuestBySlug(guestSlug);
const guestWithLinkedIn = await getGuestWithLinkedIn(guestSlug);
const profilePictureUrl = getGuestProfilePicture(guest);

console.log('=== SAMUEL IMAGE DEBUG ===');
console.log('Guest found:', !!guest);
console.log('Guest data imageUrl:', guest?.data?.imageUrl);
console.log('Guest slug:', guest?.data?.slug);
console.log('GuestWithLinkedIn:', !!guestWithLinkedIn);
console.log('Generated profilePictureUrl:', profilePictureUrl);
console.log('=== END DEBUG ===');
---

<html>
<head>
    <title>Samuel Image Test</title>
</head>
<body style="padding: 20px; font-family: Arial, sans-serif;">
    <h1>Samuel Hess Image Test</h1>
    
    <h2>Debug Info:</h2>
    <ul>
        <li><strong>Guest found:</strong> {guest ? 'Yes' : 'No'}</li>
        <li><strong>Guest imageUrl:</strong> {guest?.data?.imageUrl}</li>
        <li><strong>Guest slug:</strong> {guest?.data?.slug}</li>
        <li><strong>Generated URL:</strong> {profilePictureUrl}</li>
    </ul>
    
    <h2>Image Tests:</h2>
    
    <h3>1. Direct path test:</h3>
    <img 
        src="/images/guests/samuel-hess.jpeg" 
        alt="Direct path test"
        style="width: 150px; height: 150px; object-fit: cover; border: 2px solid blue;"
        onload="console.log('Direct path image loaded')"
        onerror="console.error('Direct path image failed')"
    />
    
    <h3>2. Generated URL test:</h3>
    <img 
        src={profilePictureUrl}
        alt="Generated URL test"
        style="width: 150px; height: 150px; object-fit: cover; border: 2px solid green;"
        onload="console.log('Generated URL image loaded:', this.src)"
        onerror="console.error('Generated URL image failed:', this.src)"
    />
    
    <h3>3. Guest data imageUrl test:</h3>
    {guest?.data?.imageUrl && (
        <img 
            src={guest.data.imageUrl}
            alt="Guest data imageUrl test"
            style="width: 150px; height: 150px; object-fit: cover; border: 2px solid red;"
            onload="console.log('Guest data imageUrl loaded:', this.src)"
            onerror="console.error('Guest data imageUrl failed:', this.src)"
        />
    )}
    
    <h3>4. Fetch test:</h3>
    <button onclick="testFetch()">Test Image Fetch</button>
    <div id="fetch-result"></div>
    
    <script>
        async function testFetch() {
            const urls = [
                '/images/guests/samuel-hess.jpeg',
                '{profilePictureUrl}',
                '{guest?.data?.imageUrl}'
            ].filter(Boolean);
            
            const resultDiv = document.getElementById('fetch-result');
            resultDiv.innerHTML = '<p>Testing fetch...</p>';
            
            for (const url of urls) {
                try {
                    const response = await fetch(url);
                    console.log(`Fetch ${url}:`, response.status, response.statusText);
                    resultDiv.innerHTML += `<p>✅ ${url}: ${response.status} ${response.statusText}</p>`;
                } catch (error) {
                    console.error(`Fetch ${url} failed:`, error);
                    resultDiv.innerHTML += `<p>❌ ${url}: ${error.message}</p>`;
                }
            }
        }
    </script>
</body>
</html>